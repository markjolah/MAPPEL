# MexIFace-External/CMakeLists.txt.in
#
# Template to generate a CMAKE project in the build tree that will download config build and install
# MexIFace to CMAKE_INSTALL_PREFIX using ExternalProject_Add
#
# This file must be at MexIFace-External/CMakeLists.txt.in relative to the source root.
#
cmake_minimum_required(VERSION 2.8.2)

project(MexIFace-External NONE)

include(ExternalProject)

set(MexIFace_GIT_URL https://github.com/markjolah/MexIFace.git)
set(MexIFace_GIT_URL $ENV{HOME}/github/MexIFace)
ExternalProject_Add(MexIFaceDebug
    GIT_REPOSITORY ${MexIFace_GIT_URL}
    GIT_TAG master
    GIT_SHALLOW 1
    GIT_PROGRESS 0
    SOURCE_DIR @CMAKE_BINARY_DIR@/MexIFace-External/_source_debug
    BINARY_DIR @CMAKE_BINARY_DIR@/MexIFace-External/_build_debug
    INSTALL_DIR @CMAKE_INSTALL_PREFIX@
    CMAKE_ARGS
        -DCMAKE_BUILD_TYPE=Debug
        -DCMAKE_CXX_COMPILER=@CMAKE_CXX_COMPILER@
        -DCMAKE_INSTALL_PREFIX=@CMAKE_INSTALL_PREFIX@
        -DCMAKE_TOOLCHAIN_FILE=@CMAKE_TOOLCHAIN_FILE@
    INSTALL_COMMAND
        @CMAKE_COMMAND@
        --build .
        --target install
        --
        -j4
    )

ExternalProject_Add(MexIFaceRelease
    GIT_REPOSITORY ${MexIFace_GIT_URL}
    GIT_TAG master
    GIT_SHALLOW 1
    GIT_PROGRESS 0
    SOURCE_DIR @CMAKE_BINARY_DIR@/MexIFace-External/_source_release
    BINARY_DIR @CMAKE_BINARY_DIR@/MexIFace-External/_build_release
    INSTALL_DIR @CMAKE_INSTALL_PREFIX@
    CMAKE_ARGS
        -DCMAKE_BUILD_TYPE=Release
        -DCMAKE_CXX_COMPILER=@CMAKE_CXX_COMPILER@
        -DCMAKE_INSTALL_PREFIX=@CMAKE_INSTALL_PREFIX@
        -DCMAKE_TOOLCHAIN_FILE=@CMAKE_TOOLCHAIN_FILE@
    INSTALL_COMMAND
        @CMAKE_COMMAND@
        --build .
        --target install
        --
        -j4
    )
add_dependencies(MexIFaceRelease MexIFaceDebug)
